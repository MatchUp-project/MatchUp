<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>알림 | Match-Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root {
            --notify-text-main: #111827;
            --notify-text-muted: #6b7280;
            --notify-card-bg: rgba(255, 255, 255, 0.96);
            --notify-border: rgba(226, 232, 240, 0.9);
        }

        * {
            box-sizing: border-box;
        }

        /* ===== 배경 & 기본 레이아웃 ===== */
        body.notify-body {
            margin: 0;
            min-height: 100vh;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
            color: var(--notify-text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
            padding: 40px 16px;
            background:
                radial-gradient(circle at 0% 0%, rgba(248, 187, 208, 0.9), transparent 55%),
                radial-gradient(circle at 100% 100%, rgba(129, 230, 217, 0.9), transparent 55%),
                linear-gradient(120deg, #fde1e7 0%, #d2c4ff 45%, #bde5ff 100%);
            position: relative;
            overflow: hidden;
        }

        body.notify-body::before {
            content: "";
            position: absolute;
            inset: -40%;
            background:
                radial-gradient(circle at 20% 0%, rgba(255, 255, 255, 0.35), transparent 55%),
                radial-gradient(circle at 80% 100%, rgba(255, 255, 255, 0.25), transparent 55%);
            opacity: 0.9;
            z-index: -1;
            filter: blur(4px);
        }

        .notify-wrapper {
            width: 100%;
            max-width: 960px;
        }

        /* ===== 메인 카드 ===== */
        .notify-card {
            width: 100%;
            background: var(--notify-card-bg);
            border-radius: 28px;
            padding: 22px 24px 20px;
            box-shadow:
                0 24px 65px rgba(15, 23, 42, 0.35),
                0 0 0 1px rgba(148, 163, 184, 0.16);
            backdrop-filter: blur(18px);
        }

        .notify-header-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .notify-header-sub {
            font-size: 13px;
            color: var(--notify-text-muted);
            margin-bottom: 16px;
        }

        /* ===== 리스트 ===== */
        .notify-list {
            margin: 0;
            padding: 0;
        }

        .notify-list .list-group-item {
            border: none;
            background: rgba(249, 250, 251, 0.98);
            border-radius: 16px;
            padding: 12px 18px;
            margin-bottom: 8px;
            box-shadow: 0 10px 26px rgba(15, 23, 42, 0.18);
            transition:
                background-color 0.12s ease,
                transform 0.08s ease,
                box-shadow 0.12s ease;
        }

        .notify-list .list-group-item:hover {
            background: #ffffff;
            transform: translateY(-1px);
            box-shadow: 0 14px 30px rgba(15, 23, 42, 0.26);
        }

        /* 읽은 알림 (지금은 안 쓰고 있지만 text-muted 붙이면 흐릿하게) */
        .notify-list .list-group-item.text-muted {
            opacity: 0.55;
        }

        .notify-content {
            font-size: 14px;
            margin-bottom: 2px;
        }

        .notify-time {
            font-size: 12px;
            color: var(--notify-text-muted);
        }

        .notify-empty {
            font-size: 14px;
            color: var(--notify-text-muted);
            padding: 8px 2px 2px;
        }

        /* 버튼쪽 */
        .notify-actions form button {
            font-size: 12px;
            padding: 6px 14px;
            border-radius: 999px;
        }

        /* 아래 도크 (옵션) */
        .notify-dock {
            width: 220px;
            height: 22px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.96);
            box-shadow: 0 18px 40px rgba(15, 23, 42, 0.55);
        }
    </style>
</head>
<body class="notify-body">

<div class="notify-wrapper">
    <div class="notify-card">

        <div class="notify-header">
            <div class="notify-header-title">알림</div>
            <div class="notify-header-sub">매치 활동과 관련된 최근 알림을 확인하세요.</div>
        </div>

        <div th:if="${#lists.isEmpty(notifications)}" class="notify-empty">
            알림이 없습니다.
        </div>

        <div class="list-group notify-list" th:if="${!#lists.isEmpty(notifications)}">
            <div class="list-group-item d-flex justify-content-between align-items-center"
                 th:each="n : ${notifications}">
                <div>
                    <div class="notify-content" th:text="${n.content}">알림 내용</div>
                    <div class="notify-time"
                         th:text="${#temporals.format(n.createdAt, 'yyyy-MM-dd HH:mm')}">
                        2025-12-01 10:00
                    </div>
                </div>

                <!-- 매치 신청 알림인 경우 -->
                <div th:if="${n.type == 'MATCH_REQUEST'}" class="notify-actions">

                    <!-- 1) 아직 처리 안 된(PENDING) 신청이면 수락 / 거절 버튼 표시 -->
                    <div th:if="${n.relatedMatchRequest != null
                                 and n.relatedMatchRequest.status == 'PENDING'}">
                        <form th:action="@{'/notifications/' + ${n.id} + '/accept'}"
                              method="post" class="d-inline">
                            <button type="submit" class="btn btn-sm btn-success">수락</button>
                        </form>
                        <form th:action="@{'/notifications/' + ${n.id} + '/reject'}"
                              method="post" class="d-inline ms-1">
                            <button type="submit" class="btn btn-sm btn-danger">거절</button>
                        </form>
                    </div>

                    <!-- 2) 이미 수락된 신청이면 문구만 표시 -->
                    <div th:if="${n.relatedMatchRequest != null
                                 and n.relatedMatchRequest.status == 'ACCEPTED'}"
                         class="text-success fw-semibold">
                        수락되었습니다.
                    </div>

                    <!-- 3) 이미 거절된 신청이면 문구만 표시 -->
                    <div th:if="${n.relatedMatchRequest != null
                                 and n.relatedMatchRequest.status == 'REJECTED'}"
                         class="text-danger fw-semibold">
                        거절되었습니다.
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>

<div class="notify-dock"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
