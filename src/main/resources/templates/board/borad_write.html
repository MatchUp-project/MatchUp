<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>게시글 작성</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container py-5">

    <h3>✏ 게시글 작성</h3>

    <form id="boardForm">

        <div class="mb-3">
            <label class="form-label">카테고리</label>
            <select class="form-select" name="category" id="category">
                <option value="FREE">자유게시판</option>
                <option value="PLAYER">선수모집</option>
                <option value="TEAM">팀구함</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">제목</label>
            <input type="text" class="form-control" name="title">
        </div>

        <div class="mb-3">
            <label class="form-label">내용</label>
            <textarea class="form-control" rows="8" name="content"></textarea>
        </div>

        <button type="submit" class="btn btn-primary">등록</button>
        <a href="/board" class="btn btn-secondary">취소</a>

    </form>

</div>

<script>
    const form = document.getElementById('boardForm');

    form.addEventListener('submit', function(e) {
        e.preventDefault();

        const data = {
            category: form.category.value,
            title: form.title.value,
            content: form.content.value
        };

        fetch('/api/board', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        })
        .then(res => res.text())
        .then(id => {
            alert('작성 완료!');
            location.href = '/board/' + id;
        });
    });
</script>

</body>
</html>
