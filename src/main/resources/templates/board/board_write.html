<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ê²Œì‹œê¸€ ì‘ì„± | Match-Up</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        :root {
            --bg-body: #020617;
            --bg-panel: #050b24;
            --bg-card: #050b18;
            --bg-card-soft: #07111f;

            --accent-green: #a3ff12;
            --accent-green-soft: #22c55e;

            --text-main: #f9fafb;
            --text-muted: #9ca3af;

            --border-subtle: #111827;
        }

        * { box-sizing: border-box; }

        body.write-body {
            margin: 0;
            min-height: 100vh;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            background:
                radial-gradient(circle at 0 0, rgba(163,255,18,0.18) 0, transparent 55%),
                radial-gradient(circle at 100% 100%, rgba(34,197,94,0.20) 0, transparent 55%),
                #0c1120;
        }

        main.write-main {
            flex: 1;
            padding: 32px 0 50px;
        }

        a { text-decoration: none; }

        /* ===== ìƒë‹¨ ìœ í‹¸ë°” ===== */
        .topbar {
            background: #050b24;
            color: #e5e7eb;
            border-bottom: 1px solid #050b24;
            font-size: 13px;
        }

        .topbar a { font-size: 13px; }

        /* ===== í—¤ë” ===== */
        header.main-header {
            background: #050b24;
            border-bottom: 1px solid #050b24;
            box-shadow: 0 8px 24px rgba(0,0,0,0.7);
        }

        header.main-header .navbar-brand {
            color: #f9fafb;
            font-weight: 900;
            letter-spacing: 0.12em;
            text-transform: uppercase;
        }

        .main-nav {
            border-top: none !important;
            margin-top: 10px;
            gap: 10px;
        }

        .main-nav .main-nav-link {
            color: #e5e7eb;
            font-weight: 600;
            font-size: 14px;
            padding: 6px 18px !important;
            border-radius: 999px;
            border: 1px solid #111827;
            background: #020617;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .main-nav .main-nav-link:hover,
        .main-nav .main-nav-link:focus,
        .main-nav .show > .main-nav-link {
            color: var(--accent-green);
            border-color: var(--accent-green-soft);
            box-shadow: 0 0 0 1px rgba(34,197,94,0.5);
        }

        .dropdown-menu {
            background: #020617;
            border-color: #111827;
            font-size: 13px;
        }

        .dropdown-menu .dropdown-item {
            color: #e5e7eb;
        }

        .dropdown-menu .dropdown-item:hover {
            background: #111827;
            color: var(--accent-green);
        }

        /* ===== ì‘ì„± ì¹´ë“œ ===== */
        .write-wrapper {
            max-width: 820px;
            margin: 0 auto;
        }

        .write-card {
            background: var(--bg-panel);
            border-radius: 28px;
            padding: 28px 30px 32px;
            border: 1px solid #020617;
            box-shadow: 0 20px 55px rgba(0,0,0,0.8);
        }

        .write-title {
            font-size: 22px;
            font-weight: 800;
        }

        .write-subtitle {
            font-size: 13px;
            color: var(--text-muted);
            margin-top: 4px;
            margin-bottom: 24px;
        }

        .form-label {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 6px;
            color: var(--text-main);
        }

        .form-control, .form-select {
            background: #020617;
            border: 1px solid #1e293b;
            color: #fff;
            border-radius: 14px;
            padding: 10px 14px;
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--accent-green);
            box-shadow: 0 0 0 1px var(--accent-green);
        }

        textarea.form-control {
            border-radius: 18px;
            resize: vertical;
        }

        .write-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .btn-submit {
            background: transparent;
            color: var(--accent-green);
            border: 1px solid var(--accent-green-soft);
            border-radius: 999px;
            padding: 10px 26px;
            font-weight: 700;
            transition: 0.2s;
        }

        .btn-submit:hover {
            background: var(--accent-green);
            color: #020617;
        }

        .btn-cancel {
            background: transparent;
            color: #9ca3af;
            border: 1px solid #4b5563;
            border-radius: 999px;
            padding: 10px 24px;
            transition: 0.2s;
        }

        .btn-cancel:hover {
            background: #4b5563;
            color: white;
        }

    </style>
</head>

<body class="write-body">

<!-- ================= ìƒë‹¨ ìœ í‹¸ë°” ================= -->
<div class="topbar text-white small py-1">
    <div class="container d-flex justify-content-end align-items-center gap-3">

        <!-- ğŸ”” ì•Œë¦¼ ë“œë¡­ë‹¤ìš´ -->
        <div class="dropdown position-relative">
            <a class="text-white text-decoration-none dropdown-toggle"
               href="#" id="notiDropdown" data-bs-toggle="dropdown">
                <i class="bi bi-bell-fill"></i>
                <span th:if="${hasUnreadNotifications}"
                      class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle"></span>
            </a>

            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notiDropdown">
                <li class="dropdown-header fw-semibold">ìµœê·¼ ì•Œë¦¼</li>

                <li th:if="${#lists.isEmpty(recentNotifications)}"
                    class="dropdown-item text-muted">
                    ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.
                </li>

                <li th:each="noti : ${recentNotifications}">
                    <a class="dropdown-item" th:href="@{/notifications}">
                        <span th:text="${noti.content}">ë‚´ìš©</span><br>
                        <small class="text-muted"
                               th:text="${#temporals.format(noti.createdAt, 'MM-dd HH:mm')}"></small>
                    </a>
                </li>

                <li><hr class="dropdown-divider"></li>
                <li>
                    <a class="dropdown-item text-center fw-semibold"
                       th:href="@{/notifications}">
                        ëª¨ë‘ ë³´ê¸°
                    </a>
                </li>
            </ul>
        </div>

        <a href="/" class="link-light text-decoration-none">í™ˆ</a>
        <a href="/profile" class="link-light text-decoration-none">ë‚´ ì •ë³´</a>
        <a href="/logout" class="link-light text-decoration-none">ë¡œê·¸ì•„ì›ƒ</a>
    </div>
</div>

<!-- ================= í—¤ë” ================= -->
<header class="main-header border-0 pt-3">
    <div class="container pb-2">
        <div class="d-flex align-items-center justify-content-between gap-3">
            <a class="navbar-brand fw-bold fs-3 m-0" href="/">
                MATCH<span style="color: var(--accent-green);">UP</span>
            </a>
        </div>

        <nav class="mt-3">
            <ul class="nav main-nav">

                <li class="nav-item dropdown">
                    <a class="nav-link fw-semibold main-nav-link dropdown-toggle"
                       href="#" id="teamMenu"
                       role="button"
                       data-bs-toggle="dropdown"
                       aria-expanded="false">
                        <i class="bi bi-people-fill me-1"></i> íŒ€
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="teamMenu">
                        <li><a class="dropdown-item" href="/team/board">íŒ€ ê²Œì‹œíŒ</a></li>
                        <li><a class="dropdown-item" href="/team/members">íŒ€ ë©¤ë²„</a></li>
                        <li><a class="dropdown-item" href="/team/schedule">ì¼ì •í‘œ</a></li>
                        <li><a class="dropdown-item" href="/team/records">ê²½ê¸° ê¸°ë¡</a></li>
                    </ul>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link fw-semibold main-nav-link dropdown-toggle"
                       href="#" id="communityMenu"
                       role="button"
                       data-bs-toggle="dropdown"
                       aria-expanded="false">
                        <i class="bi bi-chat-dots-fill me-1"></i> ì»¤ë®¤ë‹ˆí‹°
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="communityMenu">
                        <li><a class="dropdown-item" href="/board/list?category=FREE">ììœ ê²Œì‹œíŒ</a></li>
                        <li><a class="dropdown-item" href="/board/list?category=PLAYER">ì„ ìˆ˜ëª¨ì§‘</a></li>
                        <li><a class="dropdown-item" href="/board/list?category=TEAM">íŒ€êµ¬í•¨</a></li>
                    </ul>
                </li>

                <li class="nav-item">
                    <a class="nav-link fw-semibold main-nav-link" href="/match/apply">
                        <i class="bi bi-trophy-fill me-1"></i> ë§¤ì¹˜ ì‹ ì²­
                    </a>
                </li>

            </ul>
        </nav>

    </div>
</header>

<!-- ================= í¼ ì¹´ë“œ ================= -->
<main class="write-main">
    <div class="write-wrapper">
        <div class="write-card">

            <div class="write-title">ê²Œì‹œê¸€ ì‘ì„±</div>
            <div class="write-subtitle">ì»¤ë®¤ë‹ˆí‹°ì— ê³µê°œë  ê²Œì‹œê¸€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.</div>

            <form id="boardForm">

                <div class="mb-3">
                    <label class="form-label">ì¹´í…Œê³ ë¦¬</label>
                    <select class="form-select" name="category" id="category">
                        <option value="FREE">ììœ ê²Œì‹œíŒ</option>
                        <option value="PLAYER">ì„ ìˆ˜ëª¨ì§‘</option>
                        <option value="TEAM">íŒ€êµ¬í•¨</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">ì œëª©</label>
                    <input type="text" class="form-control" name="title" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">ë‚´ìš©</label>
                    <textarea class="form-control" rows="8" name="content" required></textarea>
                </div>

                <!-- ì„ ìˆ˜ëª¨ì§‘ ì „ìš© -->
                <div id="playerFields" class="d-none">
                    <div class="mb-3">
                        <label class="form-label">í¬ì§€ì…˜</label>
                        <select name="positionNeeded" class="form-select">
                            <option value="FW">FW</option>
                            <option value="MF">MF</option>
                            <option value="DF">DF</option>
                            <option value="GK">GK</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">ë‚˜ì´ëŒ€</label>
                        <input type="text" class="form-control" name="ageRange" placeholder="ì˜ˆ: 20~30">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">ì‹¤ë ¥</label>
                        <select name="skillLevel" class="form-select">
                            <option value="ì´ˆê¸‰">ì´ˆê¸‰</option>
                            <option value="ì¤‘ê¸‰">ì¤‘ê¸‰</option>
                            <option value="ìƒê¸‰">ìƒê¸‰</option>
                        </select>
                    </div>
                </div>

                <!-- íŒ€êµ¬í•¨ ì „ìš© -->
                <div id="teamFields" class="d-none">
                    <div class="mb-3">
                        <label class="form-label">ì§€ì—­</label>
                        <input type="text" class="form-control" name="region" placeholder="ì˜ˆ: ì„œìš¸/ëŒ€êµ¬/ì²­ì£¼">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">ì„ í˜¸ í¬ì§€ì…˜</label>
                        <select name="preferredPosition" class="form-select">
                            <option value="FW">FW</option>
                            <option value="MF">MF</option>
                            <option value="DF">DF</option>
                            <option value="GK">GK</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">ì‹¤ë ¥</label>
                        <select name="skillLevel" class="form-select">
                            <option value="ì´ˆê¸‰">ì´ˆê¸‰</option>
                            <option value="ì¤‘ê¸‰">ì¤‘ê¸‰</option>
                            <option value="ìƒê¸‰">ìƒê¸‰</option>
                        </select>
                    </div>
                </div>

                <div class="write-actions">
                    <button type="submit" class="btn-submit">ë“±ë¡</button>
                    <a href="/board/list?category=FREE" class="btn-cancel">ì·¨ì†Œ</a>
                </div>

            </form>

        </div>
    </div>
</main>

<footer class="site-footer py-4 mt-3">
    <div class="container small d-flex justify-content-between">
        <div>Â© 2025 Match-Up</div>
        <div class="text-white-50">ë¬¸ì˜: support@matchup.com</div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    const categorySelect = document.getElementById('category');
    const playerFields = document.getElementById('playerFields');
    const teamFields = document.getElementById('teamFields');

    function toggleFields() {
        const value = categorySelect.value;

        playerFields.classList.add('d-none');
        teamFields.classList.add('d-none');

        if (value === 'PLAYER') playerFields.classList.remove('d-none');
        if (value === 'TEAM') teamFields.classList.remove('d-none');
    }

    categorySelect.addEventListener('change', toggleFields);
    toggleFields();

    const form = document.getElementById('boardForm');

    form.addEventListener('submit', function(e) {
        e.preventDefault();

        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());

        fetch('/api/board', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        })
            .then(res => res.text())
            .then(id => {
                location.href = '/board/' + id;
            });
    });
</script>

</body>
</html>
